<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Baccarat Master AI - Treinamento</title>
<style>
  body { background:#111; color:#fff; font-family:Arial; text-align:center; }
  h1 { color:#00ffcc; }
  input, button { padding:10px 20px; font-size:16px; margin:5px; }
  #output { margin-top:20px; font-size:24px; font-weight:bold; }
  .player { color:#00ffcc; }
  .banker { color:#ff0066; }
  .tie { color:#ffff00; }
  #timer { font-size:20px; margin-top:10px; }
  #history { margin-top:20px; text-align:left; max-height:250px; overflow-y:auto; background:#222; padding:10px; border-radius:8px; }
  .acerto { color:#00ff00; }
  .erro { color:#ff0000; }
  .gale { color:#1e90ff; }
</style>
</head>
<body>
<h1>üîÆ Baccarat Master AI - Treinamento</h1>
<input type="text" id="link" placeholder="Cole o link do gr√°fico aqui" size="50">
<button id="startBtn">‚ñ∂ Iniciar</button>

<div id="output">Aguardando in√≠cio...</div>
<div id="timer"></div>
<button id="acertouBtn" disabled>Acertou</button>
<button id="errouBtn" disabled>Errou</button>
<div id="history"></div>

<script>
let rodadaAtiva = false;
let galeAtivo = false;
let recomendacaoAtual = "";
let timerInterval;
let contador = 10;

async function gerarRecomendacao() {
  const link = document.getElementById("link").value;
  if (!link) {
    alert("Cole um link v√°lido!");
    return "Jogador"; // fallback
  }

  try {
    const res = await fetch("https://api.allorigins.win/get?url=" + encodeURIComponent(link));
    const data = await res.json();
    const html = data.contents;

    // An√°lise simples: procura palavras-chave
    if (/player/i.test(html)) return "Jogador";
    if (/banker/i.test(html)) return "Banker";
    if (/tie|empate/i.test(html)) return "Empate";
    
    // fallback aleat√≥rio se nada encontrado
    const r = Math.random();
    if (r < 0.45) return "Jogador";
    if (r < 0.9) return "Banker";
    return "Empate";

  } catch (err) {
    console.error(err);
    return "Jogador"; // fallback
  }
}

async function mostrarRecomendacao() {
  recomendacaoAtual = await gerarRecomendacao();
  const classe = recomendacaoAtual === "Jogador" ? "player" :
                 recomendacaoAtual === "Banker" ? "banker" : "tie";
  document.getElementById("output").innerHTML = `<span class="${classe}">${recomendacaoAtual}</span>`;
  rodadaAtiva = true;
  contador = 10;
  document.getElementById("acertouBtn").disabled = true;
  document.getElementById("errouBtn").disabled = true;
  iniciarContador();
}

function iniciarContador() {
  document.getElementById("timer").innerText = `Tempo at√© pr√≥xima partida: ${contador}s`;
  timerInterval = setInterval(() => {
    contador--;
    document.getElementById("timer").innerText = `Tempo at√© pr√≥xima partida: ${contador}s`;
    if (contador <= 0) {
      clearInterval(timerInterval);
      rodadaAtiva = false;
      document.getElementById("acertouBtn").disabled = false;
      document.getElementById("errouBtn").disabled = false;
    }
  }, 1000);
}

function registrarResultado(acertou) {
  const history = document.getElementById("history");
  let classe = acertou ? "acerto" : "erro";
  let texto = acertou ? "Acertou" : "Errou";
  if (galeAtivo) {
    classe = "gale";
    texto += " (Gale)";
    galeAtivo = false;
  } else if (!acertou) {
    galeAtivo = true;
  }

  history.innerHTML += `<div class="${classe}">Rodada: ${recomendacaoAtual} ‚Üí ${texto}</div>`;
  history.scrollTop = history.scrollHeight;
  mostrarRecomendacao();
}

document.getElementById("startBtn").addEventListener("click", () => mostrarRecomendacao());
document.getElementById("acertouBtn").addEventListener("click", () => {
  if (!rodadaAtiva) registrarResultado(true);
});
document.getElementById("errouBtn").addEventListener("click", () => {
  if (!rodadaAtiva) registrarResultado(false);
});
</script>
</body>
</html>
