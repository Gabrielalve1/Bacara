<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Baccarat AI Profissional</title>
<style>
body { background:#111; color:#fff; font-family:Arial; text-align:center; }
h1 { color:#00ffc3; margin-top:20px; }
input, button { margin:8px; padding:10px 15px; border:none; border-radius:6px; font-size:16px; cursor:pointer; }
button { background:#00ffc3; color:#000; font-weight:bold; }
#output { background:#111; padding:20px; border-radius:10px; width:90%; margin:20px auto; text-align:left; font-size:18px; }
.player { color:#00ffc3; font-weight:bold; }
.banker { color:#ff3366; font-weight:bold; }
.tie { color:#ffff33; font-weight:bold; }
</style>
</head>
<body>

<h1>üîÆ Baccarat AI Profissional</h1>
<p>Cole o link do jogo:</p>
<input type="text" id="link" placeholder="Link da mesa" size="50">
<button onclick="start()">‚ñ∂ Iniciar An√°lise</button>

<div id="output">Aguardando in√≠cio...</div>

<div id="feedback" style="display:none; margin-top:10px;">
<p>Como foi o resultado da rodada?</p>
<button onclick="registrar('acerto')">‚úÖ Acertou</button>
<button onclick="registrar('erro')">‚ùå Errou</button>
<button onclick="registrar('empate')">‚öñÔ∏è Empate</button>
</div>

<script>
let ultimaRecomendacao = "";
let linkGlobal = "";

async function analisar() {
    try {
        const api = `/api/feedback?link=${encodeURIComponent(linkGlobal)}`;
        const res = await fetch(api);
        const data = await res.json();
        ultimaRecomendacao = data.recomendacao;

        let html = `<p>üìä Recomenda√ß√£o atual: <b>${ultimaRecomendacao}</b></p>`;
        html += `<p>üîç Aguardando seu feedback...</p>`;
        document.getElementById("output").innerHTML = html;
        document.getElementById("feedback").style.display = "block";

    } catch(e) {
        document.getElementById("output").innerHTML = "‚ö† Erro ao analisar: " + e;
    }
}

function start() {
    const link = document.getElementById("link").value;
    if (!link) { alert("Coloque um link v√°lido!"); return; }
    linkGlobal = link;
    analisar();
}

async function registrar(resultado) {
    document.getElementById("feedback").style.display = "none";
    const api = `/api/feedback?link=${encodeURIComponent(linkGlobal)}&resultado=${resultado}&recomendacao=${encodeURIComponent(ultimaRecomendacao)}`;
    await fetch(api);
    document.getElementById("output").innerHTML += `<br>‚úÖ Feedback registrado. Preparando pr√≥xima recomenda√ß√£o...`;
    setTimeout(analisar, 1000);
}
</script>

</body>
</html>
