<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Baccarat AI Supreme</title>
  <style>
    body { background:#111; color:#fff; font-family:Arial, sans-serif; text-align:center; }
    h1 { color:#00ffc3; margin-top:20px; }
    input, button { margin:8px; padding:10px 15px; border:none; border-radius:6px; font-size:16px; }
    button { background:#00ffc3; color:#000; cursor:pointer; font-weight:bold; }
    #output { background:#111; padding:20px; border-radius:10px; width:90%; margin:20px auto; text-align:left; font-size:18px; }
    .player { color:#00ffc3; font-weight:bold; }
    .banker { color:#ff3366; font-weight:bold; }
    .tie { color:#ffff33; font-weight:bold; }
  </style>
</head>
<body>

<h1>üîÆ Baccarat AI Supreme</h1>
<p>Coloque o link do jogo:</p>
<input type="text" id="linkInput" placeholder="Cole o link aqui" size="50">
<button onclick="gerarRecomendacao()">‚ñ∂ Gerar Recomenda√ß√£o</button>

<div id="output">Aguardando link...</div>

<div id="feedback" style="display:none;">
  <p>Resultado da rodada:</p>
  <button onclick="registrar('acerto')">‚úÖ Acertou</button>
  <button onclick="registrar('erro')">‚ùå Errou</button>
  <button onclick="registrar('empate')">‚öñÔ∏è Empate</button>
</div>

<script>
  let ultimaRecomendacao = "";

  async function gerarRecomendacao() {
    const link = document.getElementById("linkInput").value;
    if (!link) { alert("Cole um link v√°lido!"); return; }

    const res = await fetch(`/api/analyze?link=${encodeURIComponent(link)}`);
    const data = await res.json();

    ultimaRecomendacao = data.recomendacao;
    let classe = data.recomendacao === "Player" ? "player" : data.recomendacao === "Banker" ? "banker" : "tie";

    document.getElementById("output").innerHTML = `üí° Recomenda√ß√£o: <span class='${classe}'>${data.recomendacao}</span>`;
    document.getElementById("feedback").style.display = "block";
  }

  async function registrar(resultado) {
    const link = document.getElementById("linkInput").value;
    await fetch(`/api/analyze?link=${encodeURIComponent(link)}&resultado=${resultado}&recomendacao=${ultimaRecomendacao}`);
    document.getElementById("feedback").style.display = "none";
    document.getElementById("output").innerHTML += `<br>üîÅ Pronto para nova rodada!`;
  }
</script>

</body>
</html>
