<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Baccarat Master AI Supreme</title>
  <style>
    body { background:#000; color:#fff; font-family:Arial,sans-serif; text-align:center; }
    h1 { color:#00ffc3; margin-top:20px; }
    button, input { margin:8px; padding:10px 15px; border:none; border-radius:6px; font-size:16px; cursor:pointer; }
    button { background:#00ffc3; color:#000; font-weight:bold; }
    #output { background:#111; padding:20px; border-radius:10px; width:90%; margin:20px auto; text-align:left; font-size:18px; }
  </style>
</head>
<body>
  <h1>üîÆ Baccarat Master AI Supreme</h1>
  <p>Insira o link do gr√°fico do jogo:</p>
  <input type="text" id="link" placeholder="Cole o link aqui" size="50">
  <button onclick="iniciarAnalise()">‚ñ∂ Analisar</button>

  <div id="output">Aguardando link...</div>

  <div id="feedback" style="display:none;">
    <p>Resultado da √∫ltima recomenda√ß√£o:</p>
    <button onclick="registrar('acerto')">‚úÖ Acertou</button>
    <button onclick="registrar('erro')">‚ùå Errou</button>
    <button onclick="registrar('empate')">‚öñÔ∏è Empate</button>
  </div>

  <script>
    let historico = [];
    let ultimaRecomendacao = "";
    let linkAtual = "";

    async function iniciarAnalise() {
      linkAtual = document.getElementById("link").value;
      if (!linkAtual) { alert("Insira um link v√°lido!"); return; }
      gerarRecomendacao(linkAtual);
    }

    async function gerarRecomendacao(link) {
      document.getElementById("output").innerHTML = "üß† Analisando gr√°fico...";
      // Chama backend para processar e gerar recomenda√ß√£o
      try {
        const res = await fetch(`/api/analisar?url=${encodeURIComponent(link)}`);
        const data = await res.json();

        ultimaRecomendacao = data.recomendacao;
        document.getElementById("output").innerHTML = `
          üí° Recomenda√ß√£o: <b>${ultimaRecomendacao}</b><br>
          üîç Aguarde o resultado da rodada...
        `;
        document.getElementById("feedback").style.display = "block";

      } catch(e) {
        document.getElementById("output").innerHTML = "‚ùå Erro ao analisar gr√°fico: " + e;
      }
    }

    function registrar(resultado) {
      historico.push({ recomendacao: ultimaRecomendacao, resultado });
      document.getElementById("feedback").style.display = "none";

      document.getElementById("output").innerHTML += `<br>‚úÖ Feedback registrado: ${resultado}`;
      // Gera nova recomenda√ß√£o ap√≥s feedback
      gerarRecomendacao(linkAtual);
    }
  </script>
</body>
</html>
